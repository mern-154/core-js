<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

  <title>AJAX Example</title>
</head>

<body>

  <!-- <select id="optCountry">
    <option value="">Please Select</option>
    <option value="1">India</option>
    <option value="2">USA</option>
    <option value="3">UK</option>
  </select>

  <select id="optState">
    <option value="">Please Select</option>
    <option value="1">Bihar</option>
    <option value="2">Karnatka</option>
    <option value="3">Gujarat</option>
  </select> -->

  <div class="row m-5">
    <div class="col-4">
      <input type="text" id="txtPostId" class="form-control">
    </div>
    <div class="col-4">
      <button class="btn btn-outline-primary text-uppercase" id="btnGetPost">Get Post</button>
    </div>
    <div class="col-12 mt-3" id="postDetails">No Post Data</div>
  </div>

</body>

<script>
  // console.log(window.location.href)

  // setInterval(() => {
  //   let id = $('#txtPostId').val();
  //   console.log(id);
  //   const postUrl = `https://jsonplaceholder.typicode.com/posts/${id}`;

  //   fetch(postUrl)
  //     .then(response => response.json())
  //     .then(json => {
  //       console.log(json);
  //       $('#postDetails').text(json.body);
  //     })
  // }, 5000);

  $('#btnGetPost').click(() => {
    // let id = $('#txtPostId').val();
    let id = document.getElementById('txtPostId').value;
    console.log(id);
    const postUrl = `https://jsonplaceholder.typicode.com/posts/${id}`;

    // fetch(postUrl)
    //   .then(response => response.json())
    //   .then(json => {
    //     console.log(json);
    //     $('#postDetails').text(json.body);
    //   })

    $.ajax({
      url: postUrl,
      method: "GET",
      success: function (res) {
        console.log(res);
        $('#postDetails').text(res.body);
      },
      error: function (err) {
        console.log("Error", err);
      },
    });
  });

  // const getPostData = async (id) => {
  //   const postUrl = `https://jsonplaceholder.typicode.com/posts/${id}`;
  //   let data;

  //   await fetch(postUrl)
  //     .then(response => response.json())
  //     .then(json => {
  //       data = json;
  //       // console.log(json);
  //       // $('#postDetails').text(json.body);
  //     });

  //   return data;
  // }

</script>

</html>